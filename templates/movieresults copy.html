{% extends "navbar.html" %}

{% block content %}
  <body>
    <div class="container">
      <table class="table table-hover">
          <thead>
            <tr>
              <th><i class="bi bi-info-circle" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-html="true" data-bs-title="The table headers and data are populated from the <code>JSON</code> payload of a <code>GET</code> request to the <code>ords/mymovies/movie-all</code> ORDS endpoint."></i>  {{ thead[1] | capitalize }}</th>
              <th>{{ thead[2] | capitalize }}</th>
              <th>{{ thead[3] | capitalize }}</th>
              <th>{{ thead[5] | capitalize }}</th>
              <th>Abbreviated Summary</th>
            </tr>
          </thead>
          <tbody>
                {% for item in trow %}
            <tr>
              <td>{{ item.title }}</td>
              <td>{% for item in item.genres %} {{ item }} {% endfor %}</td>
              <td>{{ item.year }}</td>
              <td>{{ item.runtime }}</td>
              <td>{{ item.abbreviated_summary }}<i type="button" class="bi bi-plus" style="color: blue;" onclick="fetchData(event);" data-movie_id="{{ item.movie_id }}" name="movie_id" value="{{ item.movie_id }}" data-bs-toggle="modal" data-bs-target="#exampleModal"></i></td>
              <!-- <td> -->
              <!-- Button trigger modal -->
              <!-- <button type="button" onclick="fetchData(event);" data-movie_id="{{ item.movie_id }}" name="movie_id" value="{{ item.movie_id }}" class="btn btn-outline-primary btn-sm" data-bs-toggle="modal" data-bs-target="#exampleModal">Details</button> -->
              <!-- </td> -->
                {% endfor %}        
            </tr>
          </tbody>
      </table>
    </div>
      <nav aria-label="Page navigation">
        <ul class="pagination justify-content-center">
          <li class="page-item" style="margin: 10px;">
            {% if page_links.prev %}
            <form action="{{ url_for('previous_page') }}" method="POST">
            <i class="bi bi-info-circle p-1" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-html="true" data-bs-title="How do we achieve pagination? When an ORDS <code>JSON</code> response includes a <code>previous</code> link, Flask detects it and then enables the <code>Previous</code> button."></i>
            <input type="hidden" for="{{ page_links.prev }}" name="prev" value="{{ page_links.prev }}">
            <input class="btn btn-outline-primary btn-sm" type="submit" value="Previous">   
            {% else %}
            <input class="btn btn-outline-primary btn-sm" type="submit" disabled value="Previous">
            {% endif %}
            </form>
          </li>
          <li class="page-item" style="margin: 10px;">
            {% if page_links.next %}
          <form action="{{ url_for('next_page') }}" method="POST">
          <i class="bi bi-info-circle p-1" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-html="true" data-bs-title="How do we achieve pagination? When an ORDS <code>JSON</code> response includes a <code>next</code> link, Flask detects it and then enables the <code>Next</code> button."></i>
          <input type="hidden" for="{{ page_links.next }}" name="next" value="{{ page_links.next }}">
          <input class="btn btn-outline-primary btn-sm" type="submit" value="Next">   
          {% else %}
          <input class="btn btn-outline-primary btn-sm" type="submit" disabled value="Next">
          {% endif %}
          </form>
          </li>
          <li class="page-item" style="margin: 10px;">
          <a class="btn btn-outline-primary btn-sm" type="submit" href="{{ url_for('index') }}">Start Over</a>
          </li>
        </ul>
      </nav>
    </div>
      <script src="{{ url_for('static', filename='popper.min.js') }}"></script>
      <script src="{{ url_for('static', filename='bootstrap.min.js') }}"></script>
      <!-- <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script> -->
      <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>     -->
      <script src="{{ url_for('static', filename='functions.js') }}"></script>
      <script>
        const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]');
        const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl));
      </script>
    </body>
{% endblock %}